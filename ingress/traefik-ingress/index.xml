<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Traefik Ingress on Kubernetes 实践指南</title>
    <link>https://k8s.imroc.io/ingress/traefik-ingress/</link>
    <description>Recent content in Traefik Ingress on Kubernetes 实践指南</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    
	<atom:link href="https://k8s.imroc.io/ingress/traefik-ingress/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>安装 traefik ingress controller</title>
      <link>https://k8s.imroc.io/ingress/traefik-ingress/install-traefik-ingress/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://k8s.imroc.io/ingress/traefik-ingress/install-traefik-ingress/</guid>
      <description>最佳安装方案 如何暴露 ingress 访问入口? 最佳方案是使用 LoadBalancer 类型的 Service 来暴露，即创建外部负载均衡器来暴露流量，后续访问 ingress 的流量都走这个负载均衡器的地址，ingress 规则里面配的域名也要配置解析到这个负载均衡器的 IP 地址。
这种方式需要集群支持 LoadBalancer 类型的 Service，如果是云厂商提供的 k8s 服务，或者在云上自建集群并使用了云厂商提供的 cloud provider，也都是支持的，创建 LoadBalancer 类型的 Service 的时候会自动调云厂商的接口创建云厂商提供的负载均衡器产品(通常公网类型的负载均衡器是付费的)；如果你的集群不是前面说的情况，是自建集群并且有自己的负载均衡器方案，并部署了相关插件来适配，比如 MetalLB 和 Porter，这样也是可以支持 LoadBalancer 类型的 Service 的。
使用 helm 安装  参考官方文档: https://docs.traefik.io/getting-started/install-traefik/
 traefik 官方默认的 Helm Chart 是 v1.x 版本 (stable/traefik)，v2.x 的 chart 还在试验阶段
 下面是 traefik 官方稳定版的 chart 安装方法(traefik v1.x):
 Helm 2 Helm 3  helm install stable/traefik \  --name traefik \  --namespace kube-system \  --set kubernetes.</description>
    </item>
    
    <item>
      <title>使用 Traefik V2 让你的后台管理页面支持登录</title>
      <link>https://k8s.imroc.io/ingress/traefik-ingress/use-traefik-to-support-login/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://k8s.imroc.io/ingress/traefik-ingress/use-traefik-to-support-login/</guid>
      <description>我们安装的应用，它们的后台管理页面很多不支持用户登录(认证)，所以没有将其暴露出来对外提供访问，我们经常用 kubectl proxy 的方式来访问，这样比较不方便。
这里以 Traefik 本身的后台管理页面为例，将其加上 basic auth 登录才允许访问。
创建用户名密码：
USERNAME=roc PASSWORD=mypassword 创建 Secret:
USERS=$(htpasswd -nb USERNAME PASSWORD) cat &amp;lt;&amp;lt;EOF | kubectl apply -f - apiVersion: v1 kind: Secret metadata: name: authsecret namespace: kube-system type: Opaque stringData: users: ${USERS} EOF 创建 Middleware:
cat &amp;lt;&amp;lt;EOF | kubectl apply -f - apiVersion: traefik.containo.us/v1alpha1 kind: Middleware metadata: name: roc-auth namespace: kube-system spec: basicAuth: secret: authsecret EOF 创建 IngressRoute，引用 Middleware:
cat &amp;lt;&amp;lt;EOF | kubectl apply -f - apiVersion: traefik.</description>
    </item>
    
  </channel>
</rss>